create table public.activities (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  date date null,
  closer text null,
  closer_id uuid null,
  lead text null,
  bdr text null,
  channel text null,
  type text null,
  status text null,
  evolution text null,
  sale_value numeric null,
  proposal_value numeric null,
  notes text null,
  qualification text null,
  company_revenue text null,
  proposal_sent text null,
  reuniao_resgatada text null,
  deal_outcome text null,
  sector text null,
  sale_date date null,
  valor_recebido numeric null,
  data_recebimento date null,
  constraint activities_pkey primary key (id),
  constraint activities_closer_id_fkey foreign KEY (closer_id) references profiles (id)
) TABLESPACE pg_default;

create table public.leads (
  id uuid not null default gen_random_uuid (),
  created_at timestamp with time zone not null default now(),
  updated_at timestamp with time zone not null default now(),
  name text not null,
  email text null,
  phone text null,
  source text null,
  interest text null,
  notes text null,
  consent boolean null default false,
  status text null,
  nome_bdr text null,
  constraint leads_pkey primary key (id)
) TABLESPACE pg_default;

create trigger set_timestamp BEFORE
update on leads for EACH row
execute FUNCTION trigger_set_timestamp ();

create table public.payments (
  id bigint generated by default as identity not null,
  activity_id bigint null,
  valor_pago numeric null,
  data_pagamento date null,
  meio_pagamento text null,
  created_at timestamp with time zone null default now(),
  constraint payments_pkey primary key (id),
  constraint payments_activity_id_fkey foreign KEY (activity_id) references activities (id) on delete CASCADE
) TABLESPACE pg_default;

create table public.profiles (
  id uuid not null,
  full_name text null,
  updated_at timestamp with time zone null,
  is_active boolean not null default true,
  constraint profiles_pkey primary key (id),
  constraint profiles_id_fkey foreign KEY (id) references auth.users (id) on delete CASCADE
) TABLESPACE pg_default;